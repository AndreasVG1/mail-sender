{% extends "base.html" %}
{% block title %}Sent Mail Logs{% endblock %}

{% block content %}
<h2 class="mb-4 text-center">Mail Logs</h2>

{% if mail_logs %}
<div class="table-responsive">
  <table class="table table-striped table-hover align-middle">
    <thead class="table-dark">
      <tr>
        <th>Title</th>
        <th>Preview</th>
        <th>Recipient</th>
        <th>Time</th>
      </tr>
    </thead>
    <tbody>
      {% for log in mail_logs %}
        <tr>
          <td>{{ log.template.title }}</td>
          <td>{{ log.template.content_html[:50]|safe }}...</td>
          <td>{{ log.recipient }}</td>
          <td>{{ log.timestamp.strftime('%d/%m/%Y %H:%M') }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

  <!-- Pagination controls -->
  {% if pagination.pages > 1 %}
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center mt-4">
      <li class="page-item {% if not pagination.has_prev %}disabled{% endif %}">
        <a class="page-link" href="?page={{ pagination.prev_num }}" tabindex="-1">Previous</a>
      </li>
      {% for p in range(1, pagination.pages + 1) %}
        <li class="page-item {% if p == pagination.page %}active{% endif %}">
          <a class="page-link" href="?page={{ p }}">{{ p }}</a>
        </li>
      {% endfor %}
      <li class="page-item {% if not pagination.has_next %}disabled{% endif %}">
        <a class="page-link" href="?page={{ pagination.next_num }}">Next</a>
      </li>
    </ul>
  </nav>
  {% endif %}
{% else %}
  <div class="alert alert-info text-center">
    You haven't sent any mail yet.
  </div>
{% endif %}
{% endblock %}